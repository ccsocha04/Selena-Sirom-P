<section id="rsvp" class="section-bg-color extra-padding-section">
    <div class="container">

        <div class="row">
            <div class="col-lg-10 offset-lg-1 col-xl-8 offset-xl-2  col-xxl-6 offset-xxl-3">

                <div class="form-wrapper flowers neela-style">
                    <h1 class="section-title">
                        <%= reservation.title %>
                    </h1>

                    <% if(locals.errors) { %>
                        <div class="form_status_message">
                            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                <% locals.errors.forEach(function(error) { %>
                                    <%= error.msg %><br><br>
                                <% }) %>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        </div>
                        <script>
                            setTimeout(function() {
                                $('.rsvp').get(0).click();
                            }, 500);
                            
                        </script>
                    <% } %>

                    <% if(locals.success) { %>
                        <div class="form_status_message">
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                                <%= success %>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        </div>
                        <script>
                            setTimeout(function() {
                                $('.rsvp').get(0).click();
                            }, 500);
                            
                        </script>
                    <% } %>

                    <form id="form-rsvp" method="POST" action="/">

                        <div class="form-floating">
                            <input type="text" name="name" id="name" placeholder="Your Name*"
                                class="form-control required fromName" value="<%= locals.oldData && oldData.name ? oldData.name : '' %>">
                            <label for="name">
                                <%= reservation.name %>
                            </label>
                        </div>

                        <div class="form-floating">
                            <input type="email" name="email" id="email" placeholder="E-mail*"
                                class="form-control required fromEmail" value="<%= locals.oldData && oldData.email ? oldData.email : '' %>">
                            <label for="email">
                                <%= reservation.email %>
                            </label>
                        </div>

                        <div class="form-floating">
                            <input type="tel" name="phone" id="phone" placeholder="Phone*" pattern="[0-9]{10}"
                                class="form-control required fromPhone" value="<%= locals.oldData && oldData.phone ? oldData.phone : '' %>">
                            <label for="phone">
                                <%= reservation.phone %>
                            </label>
                        </div>

                        <div class="form-check-wrapper">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input required" type="radio" name="confirmation"
                                    id="attend_wedding_yes" value="1" <%= locals.oldData && oldData.confirmation == 1 ? 'checked' : '' %> >
                                <label for="attend_wedding_yes">
                                    <%= reservation.rsvp_si %>
                                </label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input required" type="radio" name="confirmation"
                                    id="attend_wedding_no" value="0" <%= locals.oldData && oldData.confirmation == 0 ? 'checked' : '' %>>
                                <label for="attend_wedding_no">
                                    <%= reservation.rsvp_no %>
                                </label>
                            </div>
                        </div>

                        <div class="form-floating">
                            <select class="form-select" aria-label="Number of guests" name="guests" id="num_guests">
                                <option value="0" <%= locals.oldData && oldData.guests == 0 ? 'selected' : null %> >0</option>
                                <option value="1" <%= locals.oldData && oldData.guests == 1 ? 'selected' : null %> >1</option>
                                <option value="2" <%= locals.oldData && oldData.guests == 2 ? 'selected' : null %> >2</option>
                                <option value="3" <%= locals.oldData && oldData.guests == 3 ? 'selected' : null %> >3</option>
                            </select>

                            <label for="num_guests">
                                <%= reservation.guests %>
                            </label>
                        </div>

                        <fieldset class="form-check-wrapper required" name="Preferences" id="preferences">
                            <label>
                                <%= reservation.preferences %>:
                            </label>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="water" id="water" value="1" <%= locals.oldData && oldData.water == 1 ? 'checked' : '' %>>
                                <label for="water">
                                    <%= reservation.water %>
                                </label>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="soda" id="soda" value="1" <%= locals.oldData && oldData.soda == 1 ? 'checked' : '' %>>
                                <label for="soda">
                                    <%= reservation.soda %>
                                </label>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="whiskey" id="whiskey" value="1" <%= locals.oldData && oldData.whiskey == 1 ? 'checked' : '' %>>
                                <label for="whiskey">
                                    <%= reservation.whiskey %>
                                </label>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="wine" id="wine" value="1" <%= locals.oldData && oldData.wine == 1 ? 'checked' : '' %>>
                                <label for="wine">
                                    <%= reservation.wine %>
                                </label>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="beer" id="beer" value="1" <%= locals.oldData && oldData.beer == 1 ? 'checked' : '' %>>
                                <label for="beer">
                                    <%= reservation.beer %>
                                </label>

                        </fieldset>

                        <div class="form-floating">
                            <textarea id="message" name="message" placeholder="Message" class="form-control"
                                rows="4"><%= locals.oldData && oldData.message ? oldData.message : '' %></textarea>
                            <label for="message">
                                <%= reservation.message %>
                            </label>
                        </div>
    
                        <div class="center">
                            <button type="submit" class="btn btn-primary submit_form">
                                <%= reservation.submit %>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>